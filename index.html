<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <title>Vite App</title>
</head>

<body>
  <div class="container">

    <div class="drag-and-drop" x-data="{ 
      items: [],  
    }">
      <div class="drag-and-drop__container drag-and-drop__container--from">
        <h3 class="drag-and-drop__title">From</h3>
        <ul class="drag-and-drop__items" id="list">
          <!-- loop through the items -->
          <li id="item-1" class="drag-and-drop__item" data-type="1">
            Your Item #1
          </li>
          <li id="item-2" class="drag-and-drop__item" data-type="2">
            Your Item #2
          </li>
          <li id="item-3" class="drag-and-drop__item" data-type="3">
            Your Item #3
          </li>
          <li id="item-4" class="drag-and-drop__item" data-type="4">
            Your Item #4
          </li>
          <li id="item-5" class="drag-and-drop__item" data-type="5">
            Your Item #5
          </li>
          <li id="item-6" class="drag-and-drop__item" data-type="6">
            Your Item #6
          </li>
        </ul>
      </div>
      <div class="drag-and-drop__divider">â‡„</div>
      <div class="drag-and-drop__container drag-and-drop__container--to">
        <h3 class="drag-and-drop__title">To</h3>
        <ul class="drag-and-drop__items container">
        </ul>
      </div>
    </div>

    <div class="template-container">
      <li id="template-1" class="drag-and-drop__item">
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Email address</label>
          <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
          <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
        </div>
        <div class="mb-3">
          <label for="exampleInputPassword1" class="form-label">Password</label>
          <input type="password" class="form-control" id="exampleInputPassword1">
        </div>
      </li>

      <li id="template-2" class="drag-and-drop__item">
        <div class="mb-3">
          <label for="exampleFormControlInput1" class="form-label">Email address</label>
          <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="name@example.com">
        </div>
        <div class="mb-3">
          <label for="exampleFormControlTextarea1" class="form-label">Example textarea</label>
          <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
        </div>
      </li>

      <li id="template-3" class="drag-and-drop__item">
        <select class="form-select" aria-label="Default select example">
          <option selected>Open this select menu</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
      </li>

      <li id="template-4" class="drag-and-drop__item">
        <ul class="drag-and-drop__items container"></ul>
      </li>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.3/jquery-ui.min.js"
      integrity="sha512-Ww1y9OuQ2kehgVWSD/3nhgfrb424O3802QYP/A5gPXoM4+rRjiKrjHdGxQKrMGQykmsJ/86oGdHszfcVgUr4hA=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
      $(function () {
        $("#list li").draggable({
          scroll: true,
          helper: function (ui) {
            $copy = $(`#template-${ui.target.dataset.type}`).clone();
            $copy.addClass('clone')
            return $copy;
          },
          connectToSortable: ".container"
        });

        const nestedConfig = {
          connectWith: ".container",
          revert: true,
          start: function (evt, ui) {
            ui.item.css('width', '');
            ui.item.css('height', '');
          },
          stop: function (evt, ui) {
            if (ui.item.hasClass('clone') && ui.item.attr('id') == 'template-4') {
              $(ui.item).find('ul').sortable(nestedConfig)
            }

            ui.item.removeClass('clone')
          },
        };

        $(".container").sortable(nestedConfig);
        $("ul, li").disableSelection();
      })

    </script>
    <script type="module" src="/main.js"></script>
</body>

</html>